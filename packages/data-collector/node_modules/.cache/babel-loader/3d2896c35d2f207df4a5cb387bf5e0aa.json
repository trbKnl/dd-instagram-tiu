{"ast":null,"code":"var _jsxFileName = \"/home/turbo/d3i/projects/tim_reeskens/dd-instagram-tiu/packages/data-collector/src/components/consent_form_viz/table_container.tsx\",\n  _s = $RefreshSig$();\nimport { useCallback, useMemo, useState, useEffect, useRef } from \"react\";\nimport { Translator, Title4 } from \"@eyra/feldspar\";\nimport TextBundle from \"@eyra/feldspar\";\nimport { TableItems } from \"./table_items\";\nimport { Figure } from \"./visualization_plugin/figure\";\nimport { Table } from \"./table\";\nimport { SearchBar } from \"./search_bar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TableContainer = ({\n  id,\n  table,\n  updateTable,\n  locale\n}) => {\n  _s();\n  const tableVisualizations = table.visualizations != null ? table.visualizations : [];\n  const [searchFilterIds, setSearchFilterIds] = useState();\n  const [search, setSearch] = useState(\"\");\n  const lastSearch = useRef(\"\");\n  const text = useMemo(() => getTranslations(locale), [locale]);\n  const [show, setShow] = useState(!table.folded);\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      const ids = searchRows(table.originalBody.rows, search);\n      setSearchFilterIds(ids);\n      if (search !== \"\" && lastSearch.current === \"\") {\n        setTimeout(() => setShow(true), 10);\n      }\n      lastSearch.current = search;\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [search, lastSearch]);\n  const searchedTable = useMemo(() => {\n    if (searchFilterIds === undefined) return table;\n    const filteredRows = table.body.rows.filter(row => searchFilterIds.has(row.id));\n    return {\n      ...table,\n      body: {\n        ...table.body,\n        rows: filteredRows\n      }\n    };\n  }, [table, searchFilterIds]);\n  const handleDelete = useCallback(rowIds => {\n    if (rowIds == null) {\n      if (searchedTable !== null) {\n        // if no rowIds specified, delete all rows that meet search condition\n        rowIds = searchedTable.body.rows.map(row => row.id);\n      } else {\n        return;\n      }\n    }\n    if (rowIds.length > 0) {\n      var _searchedTable$body, _searchedTable$body$r;\n      if (rowIds.length === (searchedTable === null || searchedTable === void 0 ? void 0 : (_searchedTable$body = searchedTable.body) === null || _searchedTable$body === void 0 ? void 0 : (_searchedTable$body$r = _searchedTable$body.rows) === null || _searchedTable$body$r === void 0 ? void 0 : _searchedTable$body$r.length)) {\n        setSearch(\"\");\n        setSearchFilterIds(undefined);\n      }\n      const deletedRows = [...table.deletedRows, rowIds];\n      const newTable = deleteTableRows(table, deletedRows);\n      updateTable(id, newTable);\n    }\n  }, [id, table, searchedTable]);\n  const handleUndo = useCallback(() => {\n    const deletedRows = table.deletedRows.slice(0, -1);\n    const newTable = deleteTableRows(table, deletedRows);\n    updateTable(id, newTable);\n  }, [id, table]);\n  const unfilteredRows = table.body.rows.length;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-3 md:p-4 lg:p-6 flex flex-col gap-4 w-full overflow-hidden border-[0.2rem] border-grey4 rounded-lg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex sm:flex-row justify-between w-full gap-1 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(Title4, {\n          text: table.title,\n          margin: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), unfilteredRows > 0 ? /*#__PURE__*/_jsxDEV(SearchBar, {\n          placeholder: text.searchPlaceholder,\n          search: search,\n          onSearch: setSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this) : null]\n      }, \"Title\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col w-full mb-2 text-base md:text-lg font-body max-w-2xl\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: table.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, \"Description\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between w-full mt-1 pt-1 rounded \",\n        children: [/*#__PURE__*/_jsxDEV(TableItems, {\n          table: table,\n          searchedTable: searchedTable,\n          handleUndo: handleUndo,\n          locale: locale\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `flex end gap-3 animate-fadeIn ${unfilteredRows === 0 ? \"hidden\" : \"\"}`,\n          onClick: () => setShow(!show),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-primary\",\n            children: show ? zoomOutIcon : zoomInIcon\n          }, \"zoomIcon\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-right hidden md:block\",\n            children: show ? text.hideTable : text.showTable\n          }, \"zoomText\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)]\n        }, show ? \"animate\" : \"\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, \"TableSummary\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: /*#__PURE__*/_jsxDEV(Table, {\n            show: show,\n            table: searchedTable,\n            search: search,\n            unfilteredRows: unfilteredRows,\n            handleDelete: handleDelete,\n            handleUndo: handleUndo,\n            locale: locale\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this)\n      }, \"Table\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `pt-2 grid w-full gap-4 transition-all ${tableVisualizations.length > 0 && unfilteredRows > 0 ? \"\" : \"hidden\"}`,\n        children: tableVisualizations.map((vs, i) => {\n          return /*#__PURE__*/_jsxDEV(Figure, {\n            tableInput: searchedTable,\n            visualizationInput: vs,\n            locale: locale,\n            handleDelete: handleDelete,\n            handleUndo: handleUndo\n          }, table.id + \"_\" + String(i), false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 15\n          }, this);\n        })\n      }, \"Visualizations\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, table.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(TableContainer, \"7EeJ8cHNRc1NttlIfGRApf8bwWE=\");\n_c = TableContainer;\nfunction deleteTableRows(table, deletedRows) {\n  const deleteIds = new Set();\n  for (const deletedSet of deletedRows) {\n    for (const id of deletedSet) {\n      deleteIds.add(id);\n    }\n  }\n  const rows = table.originalBody.rows.filter(row => !deleteIds.has(row.id));\n  const deletedRowCount = table.originalBody.rows.length - rows.length;\n  return {\n    ...table,\n    body: {\n      ...table.body,\n      rows\n    },\n    deletedRowCount,\n    deletedRows\n  };\n}\nfunction searchRows(rows, search) {\n  if (search.trim() === \"\") return undefined;\n\n  // Not sure whether it's better to look for one of the words or exact string.\n  // Now going for exact string. Note that if you change this, you should also change\n  // the highlighting behavior in table.tsx (<Highlighter searchWords.../>)\n  // const query = search.trim().split(/\\s+/)\n  const query = [search.trim()];\n  const regexes = [];\n  for (const q of query) {\n    regexes.push(new RegExp(q.replace(/[-/\\\\^$*+?.()|[\\]{}]/, \"\\\\$&\"), \"i\"));\n  }\n  const ids = new Set();\n  for (const row of rows) {\n    for (const regex of regexes) {\n      let anyCellMatches = false;\n      for (const cell of row.cells) {\n        if (regex.test(cell)) {\n          anyCellMatches = true;\n          break;\n        }\n      }\n      if (anyCellMatches) ids.add(row.id);\n    }\n  }\n  return ids;\n}\nconst zoomInIcon = /*#__PURE__*/_jsxDEV(\"svg\", {\n  className: \"h-6 w-6\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  \"aria-hidden\": \"true\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 199,\n  columnNumber: 3\n}, this);\nconst zoomOutIcon = /*#__PURE__*/_jsxDEV(\"svg\", {\n  className: \"h-6 w-6\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: \"2\",\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  \"aria-hidden\": \"true\",\n  children: /*#__PURE__*/_jsxDEV(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 217,\n  columnNumber: 3\n}, this);\nfunction getTranslations(locale) {\n  const translated = {};\n  for (const [key, value] of Object.entries(translations)) {\n    translated[key] = Translator.translate(value, locale);\n  }\n  return translated;\n}\nconst translations = {\n  searchPlaceholder: new TextBundle().add(\"en\", \"Search\").add(\"nl\", \"Zoeken\"),\n  showTable: new TextBundle().add(\"en\", \"Show table\").add(\"nl\", \"Tabel tonen\"),\n  hideTable: new TextBundle().add(\"en\", \"Hide table\").add(\"nl\", \"Tabel verbergen\")\n};\nvar _c;\n$RefreshReg$(_c, \"TableContainer\");","map":{"version":3,"names":["useCallback","useMemo","useState","useEffect","useRef","Translator","Title4","TextBundle","TableItems","Figure","Table","SearchBar","jsxDEV","_jsxDEV","TableContainer","id","table","updateTable","locale","_s","tableVisualizations","visualizations","searchFilterIds","setSearchFilterIds","search","setSearch","lastSearch","text","getTranslations","show","setShow","folded","timer","setTimeout","ids","searchRows","originalBody","rows","current","clearTimeout","searchedTable","undefined","filteredRows","body","filter","row","has","handleDelete","rowIds","map","length","_searchedTable$body","_searchedTable$body$r","deletedRows","newTable","deleteTableRows","handleUndo","slice","unfilteredRows","className","children","title","margin","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","searchPlaceholder","onSearch","description","onClick","zoomOutIcon","zoomInIcon","hideTable","showTable","vs","i","tableInput","visualizationInput","String","_c","deleteIds","Set","deletedSet","add","deletedRowCount","trim","query","regexes","q","push","RegExp","replace","regex","anyCellMatches","cell","cells","test","fill","stroke","strokeWidth","viewBox","xmlns","strokeLinecap","strokeLinejoin","d","translated","key","value","Object","entries","translations","translate","$RefreshReg$"],"sources":["/home/turbo/d3i/projects/tim_reeskens/dd-instagram-tiu/packages/data-collector/src/components/consent_form_viz/table_container.tsx"],"sourcesContent":["import { useCallback, useMemo, useState, useEffect, useRef } from \"react\"\nimport { \n    Translator,\n    Title4,\n} from \"@eyra/feldspar\"\nimport TextBundle from \"@eyra/feldspar\"\nimport { \n    TableWithContext,\n    PropsUITableRow,\n} from \"./types\"\nimport { TableItems } from \"./table_items\"\nimport { Figure } from \"./visualization_plugin/figure\"\nimport { Table } from \"./table\"\nimport { SearchBar } from \"./search_bar\"\n\ninterface TableContainerProps {\n  id: string\n  table: TableWithContext\n  updateTable: (tableId: string, table: TableWithContext) => void\n  locale: string\n}\n\nexport const TableContainer = ({ id, table, updateTable, locale }: TableContainerProps): JSX.Element => {\n  const tableVisualizations = table.visualizations != null ? table.visualizations : []\n  const [searchFilterIds, setSearchFilterIds] = useState<Set<string>>()\n  const [search, setSearch] = useState<string>(\"\")\n  const lastSearch = useRef<string>(\"\")\n  const text = useMemo(() => getTranslations(locale), [locale])\n  const [show, setShow] = useState<boolean>(!table.folded)\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      const ids = searchRows(table.originalBody.rows, search)\n      setSearchFilterIds(ids)\n      if (search !== \"\" && lastSearch.current === \"\") {\n        setTimeout(() => setShow(true), 10)\n      }\n      lastSearch.current = search\n    }, 300)\n    return () => clearTimeout(timer)\n  }, [search, lastSearch])\n\n  const searchedTable = useMemo(() => {\n    if (searchFilterIds === undefined) return table\n    const filteredRows = table.body.rows.filter((row) => searchFilterIds.has(row.id))\n    return { ...table, body: { ...table.body, rows: filteredRows } }\n  }, [table, searchFilterIds])\n\n  const handleDelete = useCallback(\n    (rowIds?: string[]) => {\n      if (rowIds == null) {\n        if (searchedTable !== null) {\n          // if no rowIds specified, delete all rows that meet search condition\n          rowIds = searchedTable.body.rows.map((row) => row.id)\n        } else {\n          return\n        }\n      }\n      if (rowIds.length > 0) {\n        if (rowIds.length === searchedTable?.body?.rows?.length) {\n          setSearch(\"\")\n          setSearchFilterIds(undefined)\n        }\n        const deletedRows = [...table.deletedRows, rowIds]\n        const newTable = deleteTableRows(table, deletedRows)\n        updateTable(id, newTable)\n      }\n    },\n    [id, table, searchedTable]\n  )\n\n  const handleUndo = useCallback(() => {\n    const deletedRows = table.deletedRows.slice(0, -1)\n    const newTable = deleteTableRows(table, deletedRows)\n    updateTable(id, newTable)\n  }, [id, table])\n\n  const unfilteredRows = table.body.rows.length\n\n  return (\n    <div\n      key={table.id}\n      className=\"p-3 md:p-4 lg:p-6 flex flex-col gap-4 w-full overflow-hidden border-[0.2rem] border-grey4 rounded-lg\"\n    >\n      <div className=\"flex flex-wrap \">\n        <div key=\"Title\" className=\"flex sm:flex-row justify-between w-full gap-1 mb-2\">\n          <Title4 text={table.title} margin=\"\" />\n\n          {unfilteredRows > 0 ? (\n            <SearchBar placeholder={text.searchPlaceholder} search={search} onSearch={setSearch} />\n          ) : null}\n        </div>\n        <div key=\"Description\" className=\"flex flex-col w-full mb-2 text-base md:text-lg font-body max-w-2xl\">\n          <p>{table.description}</p>\n        </div>\n        <div key=\"TableSummary\" className=\"flex items-center justify-between w-full mt-1 pt-1 rounded \">\n          <TableItems table={table} searchedTable={searchedTable} handleUndo={handleUndo} locale={locale} />\n\n          <button\n            key={show ? \"animate\" : \"\"}\n            className={`flex end gap-3 animate-fadeIn ${unfilteredRows === 0 ? \"hidden\" : \"\"}`}\n            onClick={() => setShow(!show)}\n          >\n            <div key=\"zoomIcon\" className=\"text-primary\">\n              {show ? zoomOutIcon : zoomInIcon}\n            </div>\n            <div key=\"zoomText\" className=\"text-right hidden md:block\">\n              {show ? text.hideTable : text.showTable}\n            </div>\n          </button>\n        </div>\n        <div key=\"Table\" className=\"w-full\">\n          <div className=\"\">\n            <Table\n              show={show}\n              table={searchedTable}\n              search={search}\n              unfilteredRows={unfilteredRows}\n              handleDelete={handleDelete}\n              handleUndo={handleUndo}\n              locale={locale}\n            />\n          </div>\n        </div>\n        <div\n          key=\"Visualizations\"\n          className={`pt-2 grid w-full gap-4 transition-all ${\n            tableVisualizations.length > 0 && unfilteredRows > 0 ? \"\" : \"hidden\"\n          }`}\n        >\n          {tableVisualizations.map((vs: any, i: number) => {\n            return (\n              <Figure\n                key={table.id + \"_\" + String(i)}\n                tableInput={searchedTable}\n                visualizationInput={vs}\n                locale={locale}\n                handleDelete={handleDelete}\n                handleUndo={handleUndo}\n              />\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction deleteTableRows(table: TableWithContext, deletedRows: string[][]): TableWithContext {\n  const deleteIds = new Set<string>()\n  for (const deletedSet of deletedRows) {\n    for (const id of deletedSet) {\n      deleteIds.add(id)\n    }\n  }\n\n  const rows = table.originalBody.rows.filter((row) => !deleteIds.has(row.id))\n  const deletedRowCount = table.originalBody.rows.length - rows.length\n  return {\n    ...table,\n    body: { ...table.body, rows },\n    deletedRowCount,\n    deletedRows,\n  }\n}\n\nfunction searchRows(rows: PropsUITableRow[], search: string): Set<string> | undefined {\n  if (search.trim() === \"\") return undefined\n\n  // Not sure whether it's better to look for one of the words or exact string.\n  // Now going for exact string. Note that if you change this, you should also change\n  // the highlighting behavior in table.tsx (<Highlighter searchWords.../>)\n  // const query = search.trim().split(/\\s+/)\n  const query = [search.trim()]\n\n  const regexes: RegExp[] = []\n  for (const q of query) {\n    regexes.push(new RegExp(q.replace(/[-/\\\\^$*+?.()|[\\]{}]/, \"\\\\$&\"), \"i\"))\n  }\n\n  const ids = new Set<string>()\n  for (const row of rows) {\n    for (const regex of regexes) {\n      let anyCellMatches = false\n      for (const cell of row.cells) {\n        if (regex.test(cell)) {\n          anyCellMatches = true\n          break\n        }\n      }\n      if (anyCellMatches) ids.add(row.id)\n    }\n  }\n\n  return ids\n}\n\nconst zoomInIcon = (\n  <svg\n    className=\"h-6 w-6\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6\"\n    />\n  </svg>\n)\n\nconst zoomOutIcon = (\n  <svg\n    className=\"h-6 w-6\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    viewBox=\"0 0 24 24\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    aria-hidden=\"true\"\n  >\n    <path\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      d=\"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM13.5 10.5h-6\"\n    />\n  </svg>\n)\n\nfunction getTranslations(locale: string): Record<string, string> {\n  const translated: Record<string, string> = {}\n  for (const [key, value] of Object.entries(translations)) {\n    translated[key] = Translator.translate(value, locale)\n  }\n  return translated\n}\n\nconst translations = {\n  searchPlaceholder: new TextBundle().add(\"en\", \"Search\").add(\"nl\", \"Zoeken\"),\n  showTable: new TextBundle().add(\"en\", \"Show table\").add(\"nl\", \"Tabel tonen\"),\n  hideTable: new TextBundle().add(\"en\", \"Hide table\").add(\"nl\", \"Tabel verbergen\"),\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}