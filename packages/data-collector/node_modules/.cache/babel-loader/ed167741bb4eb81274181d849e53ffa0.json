{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nexport default function useVisualizationData(table, visualization) {\n  _s();\n  const [visualizationData, setVisualizationData] = useState();\n  const [status, setStatus] = useState('loading');\n  const [worker, setWorker] = useState();\n  useEffect(() => {\n    const worker = new Worker(new URL('./visualizationDataWorker.ts', import.meta.url));\n    setWorker(worker);\n    return () => {\n      worker.terminate();\n    };\n  }, []);\n  useEffect(() => {\n    if (worker != null && window.Worker !== undefined) {\n      setStatus('loading');\n      worker.onmessage = e => {\n        try {\n          setVisualizationData(e.data.visualizationData);\n          setStatus(e.data.status);\n        } catch (e) {\n          setVisualizationData(undefined);\n          setStatus('error');\n        }\n      };\n      worker.postMessage({\n        table,\n        visualization\n      });\n    }\n  }, [table, visualization, worker]);\n  return [visualizationData, status];\n}\n_s(useVisualizationData, \"26t1UeGGfst/To+uFRUD4hRa+fo=\");","map":{"version":3,"names":["useEffect","useState","useVisualizationData","table","visualization","_s","visualizationData","setVisualizationData","status","setStatus","worker","setWorker","Worker","URL","import","meta","url","terminate","window","undefined","onmessage","e","data","postMessage"],"sources":["/home/turbo/d3i/projects/tim_reeskens/dd-instagram-tiu/packages/data-collector/src/components/consent_form_viz/visualization_plugin/visualizationDataFunctions/useVisualizationData.tsx"],"sourcesContent":["import { VisualizationType, VisualizationData, Table } from '../types'\nimport { useEffect, useState } from 'react'\n\ntype Status = 'loading' | 'success' | 'error'\n\nexport default function useVisualizationData (\n  table: Table,\n  visualization: VisualizationType\n): [VisualizationData | undefined, Status] {\n  const [visualizationData, setVisualizationData] = useState<VisualizationData>()\n  const [status, setStatus] = useState<Status>('loading')\n  const [worker, setWorker] = useState<Worker>()\n\n  useEffect(() => {\n    const worker = new Worker(new URL('./visualizationDataWorker.ts', import.meta.url))\n    setWorker(worker)\n    return () => {\n      worker.terminate()\n    }\n  }, [])\n\n  useEffect(() => {\n    if (worker != null && window.Worker !== undefined) {\n      setStatus('loading')\n      worker.onmessage = (e: MessageEvent<{ status: Status, visualizationData: VisualizationData }>) => {\n        try {\n          setVisualizationData(e.data.visualizationData)\n          setStatus(e.data.status)\n        } catch (e) {\n          setVisualizationData(undefined)\n          setStatus('error')\n        }\n      }\n      worker.postMessage({ table, visualization })\n    }\n  }, [table, visualization, worker])\n\n  return [visualizationData, status]\n}\n"],"mappings":";AACA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAI3C,eAAe,SAASC,oBAAoBA,CAC1CC,KAAY,EACZC,aAAgC,EACS;EAAAC,EAAA;EACzC,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGN,QAAQ,CAAoB,CAAC;EAC/E,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAS,SAAS,CAAC;EACvD,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAS,CAAC;EAE9CD,SAAS,CAAC,MAAM;IACd,MAAMU,MAAM,GAAG,IAAIE,MAAM,CAAC,IAAIC,GAAG,CAAC,8BAA8B,EAAEC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC;IACnFL,SAAS,CAACD,MAAM,CAAC;IACjB,OAAO,MAAM;MACXA,MAAM,CAACO,SAAS,CAAC,CAAC;IACpB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENjB,SAAS,CAAC,MAAM;IACd,IAAIU,MAAM,IAAI,IAAI,IAAIQ,MAAM,CAACN,MAAM,KAAKO,SAAS,EAAE;MACjDV,SAAS,CAAC,SAAS,CAAC;MACpBC,MAAM,CAACU,SAAS,GAAIC,CAAyE,IAAK;QAChG,IAAI;UACFd,oBAAoB,CAACc,CAAC,CAACC,IAAI,CAAChB,iBAAiB,CAAC;UAC9CG,SAAS,CAACY,CAAC,CAACC,IAAI,CAACd,MAAM,CAAC;QAC1B,CAAC,CAAC,OAAOa,CAAC,EAAE;UACVd,oBAAoB,CAACY,SAAS,CAAC;UAC/BV,SAAS,CAAC,OAAO,CAAC;QACpB;MACF,CAAC;MACDC,MAAM,CAACa,WAAW,CAAC;QAAEpB,KAAK;QAAEC;MAAc,CAAC,CAAC;IAC9C;EACF,CAAC,EAAE,CAACD,KAAK,EAAEC,aAAa,EAAEM,MAAM,CAAC,CAAC;EAElC,OAAO,CAACJ,iBAAiB,EAAEE,MAAM,CAAC;AACpC;AAACH,EAAA,CAjCuBH,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module"}