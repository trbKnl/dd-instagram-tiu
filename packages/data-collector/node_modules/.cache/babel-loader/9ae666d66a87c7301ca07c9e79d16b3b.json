{"ast":null,"code":"var _jsxFileName = \"/home/turbo/d3i/projects/tim_reeskens/dd-instagram-tiu/packages/data-collector/src/components/consent_form_viz/visualization_plugin/figures/visx_wordcloud.tsx\",\n  _s = $RefreshSig$();\nimport { Text } from '@visx/text';\nimport Wordcloud from '@visx/wordcloud/lib/Wordcloud';\nimport { ParentSize } from '@visx/responsive';\nimport { useMemo } from 'react';\nimport stopwords from './common_stopwords';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction VisxWordcloud({\n  visualizationData\n}) {\n  _s();\n  const colors = ['#444', '#1E3FCC', '#4272EF', '#CC9F3F', '#FFCF60'];\n  const nWords = 100;\n  const words = useMemo(() => {\n    const fontRange = [20, 50];\n    const words = visualizationData.topTerms.filter(w => !stopwords.includes(w.text.toLowerCase())).slice(0, nWords);\n    let minImportance = words[0].importance;\n    let maxImportance = words[0].importance;\n    words.forEach(w => {\n      if (w.importance < minImportance) minImportance = w.importance;\n      if (w.importance > maxImportance) maxImportance = w.importance;\n    });\n    const [sqrtMin, sqrtMax] = [Math.sqrt(minImportance), Math.sqrt(maxImportance)];\n    return words.map(w => {\n      const sqrtImportance = Math.sqrt(w.importance);\n      const scale = (sqrtImportance - sqrtMin) / Math.max(sqrtMax - sqrtMin, 0.001);\n      const fontSize = scale * (fontRange[1] - fontRange[0]) + fontRange[0];\n      return {\n        ...w,\n        fontSize\n      };\n    });\n  }, [visualizationData, nWords]);\n  return /*#__PURE__*/_jsxDEV(ParentSize, {\n    debounceTime: 1000,\n    children: parent => /*#__PURE__*/_jsxDEV(Wordcloud, {\n      words: words,\n      height: parent.height,\n      width: parent.width,\n      rotate: 0,\n      padding: 4,\n      spiral: \"rectangular\",\n      font: \"Finador-Bold\",\n      fontSize: w => w.fontSize,\n      random: () => 0.5,\n      children: cloudWords => {\n        return cloudWords.map((w, i) => {\n          var _w$x, _w$y, _w$rotate;\n          return /*#__PURE__*/_jsxDEV(Text, {\n            fill: colors[Math.floor(i / cloudWords.length * colors.length)],\n            fontSize: w.size,\n            textAnchor: \"middle\",\n            fontFamily: w.font,\n            transform: `translate(${(_w$x = w.x) !== null && _w$x !== void 0 ? _w$x : 0}, ${(_w$y = w.y) !== null && _w$y !== void 0 ? _w$y : 0}) rotate(${(_w$rotate = w.rotate) !== null && _w$rotate !== void 0 ? _w$rotate : 0})`,\n            children: w.text\n          }, w.text, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 17\n          }, this);\n        });\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(VisxWordcloud, \"CXRL3PlEX6cEkccPtrkPIvRWODU=\");\n_c = VisxWordcloud;\nexport default VisxWordcloud;\nvar _c;\n$RefreshReg$(_c, \"VisxWordcloud\");","map":{"version":3,"names":["Text","Wordcloud","ParentSize","useMemo","stopwords","jsxDEV","_jsxDEV","VisxWordcloud","visualizationData","_s","colors","nWords","words","fontRange","topTerms","filter","w","includes","text","toLowerCase","slice","minImportance","importance","maxImportance","forEach","sqrtMin","sqrtMax","Math","sqrt","map","sqrtImportance","scale","max","fontSize","debounceTime","children","parent","height","width","rotate","padding","spiral","font","random","cloudWords","i","_w$x","_w$y","_w$rotate","fill","floor","length","size","textAnchor","fontFamily","transform","x","y","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/turbo/d3i/projects/tim_reeskens/dd-instagram-tiu/packages/data-collector/src/components/consent_form_viz/visualization_plugin/figures/visx_wordcloud.tsx"],"sourcesContent":["import { Text } from '@visx/text'\nimport Wordcloud from '@visx/wordcloud/lib/Wordcloud'\nimport { ParentSize } from '@visx/responsive'\nimport { ScoredTerm, TextVisualizationData } from '../types'\nimport { useMemo } from 'react'\nimport stopwords from './common_stopwords'\n\ninterface Props {\n  visualizationData: TextVisualizationData\n}\n\ninterface Word extends ScoredTerm {\n  fontSize: number\n}\n\nfunction VisxWordcloud ({ visualizationData }: Props): JSX.Element | null {\n  const colors = ['#444', '#1E3FCC', '#4272EF', '#CC9F3F', '#FFCF60']\n  const nWords = 100\n\n  const words: Word[] = useMemo(() => {\n    const fontRange = [20, 50]\n    const words = visualizationData.topTerms.filter((w) => !stopwords.includes(w.text.toLowerCase())).slice(0, nWords)\n\n    let minImportance = words[0].importance\n    let maxImportance = words[0].importance\n    words.forEach((w) => {\n      if (w.importance < minImportance) minImportance = w.importance\n      if (w.importance > maxImportance) maxImportance = w.importance\n    })\n\n    const [sqrtMin, sqrtMax] = [Math.sqrt(minImportance), Math.sqrt(maxImportance)]\n    return words.map((w) => {\n      const sqrtImportance = Math.sqrt(w.importance)\n\n      const scale = (sqrtImportance - sqrtMin) / Math.max(sqrtMax - sqrtMin, 0.001)\n      const fontSize = scale * (fontRange[1] - fontRange[0]) + fontRange[0]\n      return { ...w, fontSize }\n    })\n  }, [visualizationData, nWords])\n\n  return (\n    <ParentSize debounceTime={1000}>\n      {(parent) => (\n        <Wordcloud\n          words={words}\n          height={parent.height}\n          width={parent.width}\n          rotate={0}\n          padding={4}\n          spiral='rectangular'\n          font='Finador-Bold'\n          fontSize={(w) => w.fontSize}\n          random={() => 0.5}\n        >\n          {(cloudWords) => {\n            return cloudWords.map((w, i: number) => {\n              return (\n                <Text\n                  key={w.text}\n                  fill={colors[Math.floor((i / cloudWords.length) * colors.length)]}\n                  fontSize={w.size}\n                  textAnchor='middle'\n                  fontFamily={w.font}\n                  transform={`translate(${w.x ?? 0}, ${w.y ?? 0}) rotate(${w.rotate ?? 0})`}\n                >\n                  {w.text}\n                </Text>\n              )\n            })\n          }}\n        </Wordcloud>\n      )}\n    </ParentSize>\n  )\n}\n\nexport default VisxWordcloud\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}